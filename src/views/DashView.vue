<script>
import axios from "axios";
import Web3 from "web3";
const smart_contract = {
  bytecode: {
    object:
      "6080604052600a600755600a6008556001600a5560405180602001604052806000815250600b90816200003391906200039f565b506000600c556000600d553480156200004b57600080fd5b506040518060400160405280600981526020017f4556454e545041535300000000000000000000000000000000000000000000008152506040518060400160405280600581526020017f45504153530000000000000000000000000000000000000000000000000000008152508160009081620000c991906200039f565b508060019081620000db91906200039f565b50505033600960006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555062000486565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620001a757607f821691505b602082108103620001bd57620001bc6200015f565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620002277fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82620001e8565b620002338683620001e8565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620002806200027a62000274846200024b565b62000255565b6200024b565b9050919050565b6000819050919050565b6200029c836200025f565b620002b4620002ab8262000287565b848454620001f5565b825550505050565b600090565b620002cb620002bc565b620002d881848462000291565b505050565b5b818110156200030057620002f4600082620002c1565b600181019050620002de565b5050565b601f8211156200034f576200031981620001c3565b6200032484620001d8565b8101602085101562000334578190505b6200034c6200034385620001d8565b830182620002dd565b50505b505050565b600082821c905092915050565b6000620003746000198460080262000354565b1980831691505092915050565b60006200038f838362000361565b9150826002028217905092915050565b620003aa8262000125565b67ffffffffffffffff811115620003c657620003c562000130565b5b620003d282546200018e565b620003df82828562000304565b600060209050601f83116001811462000417576000841562000402578287015190505b6200040e858262000381565b8655506200047e565b601f1984166200042786620001c3565b60005b8281101562000451578489015182556001820191506020850194506020810190506200042a565b868310156200047157848901516200046d601f89168262000361565b8355505b6001600288020188555050505b505050505050565b6137d980620004966000396000f3fe6080604052600436106101355760003560e01c80636f8b44b0116100ab578063a22cb4651161006f578063a22cb46514610426578063b88d4fde1461044f578063c87b56dd14610478578063e0df5b6f146104b5578063e3cd7c03146104de578063e985e9c5146104fa57610135565b80636f8b44b01461033f57806370a08231146103685780638ca52808146103a557806391bde935146103d057806395d89b41146103fb57610135565b806323b872dd116100fd57806323b872dd146102315780632fe702e11461025a57806342842e0e146102855780634c0f38c2146102ae5780635d885c62146102d95780636352211e1461030257610135565b806301ffc9a71461013a57806306fdde0314610177578063081812fc146101a2578063095ea7b3146101df5780630e6fd19c14610208575b600080fd5b34801561014657600080fd5b50610161600480360381019061015c9190611fd1565b610537565b60405161016e9190612019565b60405180910390f35b34801561018357600080fd5b5061018c610619565b60405161019991906120c4565b60405180910390f35b3480156101ae57600080fd5b506101c960048036038101906101c4919061211c565b6106ab565b6040516101d6919061218a565b60405180910390f35b3480156101eb57600080fd5b50610206600480360381019061020191906121d1565b610730565b005b34801561021457600080fd5b5061022f600480360381019061022a9190612211565b610847565b005b34801561023d57600080fd5b506102586004803603810190610253919061223e565b61095d565b005b34801561026657600080fd5b5061026f6109bd565b60405161027c91906122a0565b60405180910390f35b34801561029157600080fd5b506102ac60048036038101906102a7919061223e565b6109d3565b005b3480156102ba57600080fd5b506102c36109f3565b6040516102d091906122a0565b60405180910390f35b3480156102e557600080fd5b5061030060048036038101906102fb919061211c565b6109fd565b005b34801561030e57600080fd5b506103296004803603810190610324919061211c565b610a97565b604051610336919061218a565b60405180910390f35b34801561034b57600080fd5b506103666004803603810190610361919061211c565b610b48565b005b34801561037457600080fd5b5061038f600480360381019061038a9190612211565b610be2565b60405161039c91906122a0565b60405180910390f35b3480156103b157600080fd5b506103ba610c99565b6040516103c791906122a0565b60405180910390f35b3480156103dc57600080fd5b506103e5610ca3565b6040516103f291906122a0565b60405180910390f35b34801561040757600080fd5b50610410610cc6565b60405161041d91906120c4565b60405180910390f35b34801561043257600080fd5b5061044d600480360381019061044891906122e7565b610d58565b005b34801561045b57600080fd5b506104766004803603810190610471919061245c565b610d6e565b005b34801561048457600080fd5b5061049f600480360381019061049a919061211c565b610dd0565b6040516104ac91906120c4565b60405180910390f35b3480156104c157600080fd5b506104dc60048036038101906104d7919061253f565b610de2565b005b6104f860048036038101906104f39190612211565b610e88565b005b34801561050657600080fd5b50610521600480360381019061051c919061258c565b61104c565b60405161052e9190612019565b60405180910390f35b60007f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061060257507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b806106125750610611826110e0565b5b9050919050565b606060008054610628906125fb565b80601f0160208091040260200160405190810160405280929190818152602001828054610654906125fb565b80156106a15780601f10610676576101008083540402835291602001916106a1565b820191906000526020600020905b81548152906001019060200180831161068457829003601f168201915b5050505050905090565b60006106b68261114a565b6106f5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106ec9061269e565b60405180910390fd5b6004600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b600061073b82610a97565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107ab576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107a290612730565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff166107ca6111b6565b73ffffffffffffffffffffffffffffffffffffffff1614806107f957506107f8816107f36111b6565b61104c565b5b610838576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082f906127c2565b60405180910390fd5b61084283836111be565b505050565b600754600a54111561088e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108859061282e565b60405180910390fd5b61089a81600a54611277565b610930600a54600b80546108ad906125fb565b80601f01602080910402602001604051908101604052809291908181526020018280546108d9906125fb565b80156109265780601f106108fb57610100808354040283529160200191610926565b820191906000526020600020905b81548152906001019060200180831161090957829003601f168201915b5050505050611295565b6001600a5461093f919061287d565b600a819055506001600d54610954919061287d565b600d8190555050565b61096e6109686111b6565b82611302565b6109ad576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109a490612923565b60405180910390fd5b6109b88383836113e0565b505050565b60006001600a546109ce9190612943565b905090565b6109ee83838360405180602001604052806000815250610d6e565b505050565b6000600754905090565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610a8d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a84906129e9565b60405180910390fd5b8060088190555050565b6000806002600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610b3f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b3690612a7b565b60405180910390fd5b80915050919050565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610bd8576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bcf90612b0d565b60405180910390fd5b8060078190555050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610c52576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c4990612b9f565b60405180910390fd5b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000600854905090565b6000600a546001600754610cb7919061287d565b610cc19190612943565b905090565b606060018054610cd5906125fb565b80601f0160208091040260200160405190810160405280929190818152602001828054610d01906125fb565b8015610d4e5780601f10610d2357610100808354040283529160200191610d4e565b820191906000526020600020905b815481529060010190602001808311610d3157829003601f168201915b5050505050905090565b610d6a610d636111b6565b8383611646565b5050565b610d7f610d796111b6565b83611302565b610dbe576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610db590612923565b60405180910390fd5b610dca848484846117b2565b50505050565b6060610ddb8261180e565b9050919050565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610e72576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e6990612c31565b60405180910390fd5b8181600b9182610e83929190612e08565b505050565b600854341015610ecd576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ec490612f24565b60405180910390fd5b600754600a541115610f14576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f0b9061282e565b60405180910390fd5b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc479081150290604051600060405180830381858888f19350505050158015610f7c573d6000803e3d6000fd5b50610f8981600a54611277565b61101f600a54600b8054610f9c906125fb565b80601f0160208091040260200160405190810160405280929190818152602001828054610fc8906125fb565b80156110155780601f10610fea57610100808354040283529160200191611015565b820191906000526020600020905b815481529060010190602001808311610ff857829003601f168201915b5050505050611295565b6001600a5461102e919061287d565b600a819055506001600c54611043919061287d565b600c8190555050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b60008073ffffffffffffffffffffffffffffffffffffffff166002600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614159050919050565b600033905090565b816004600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff1661123183610a97565b73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b61129182826040518060200160405280600081525061195f565b5050565b61129e8261114a565b6112dd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112d490612fb6565b60405180910390fd5b806006600084815260200190815260200160002090816112fd9190612fd6565b505050565b600061130d8261114a565b61134c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113439061311a565b60405180910390fd5b600061135783610a97565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614806113995750611398818561104c565b5b806113d757508373ffffffffffffffffffffffffffffffffffffffff166113bf846106ab565b73ffffffffffffffffffffffffffffffffffffffff16145b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff1661140082610a97565b73ffffffffffffffffffffffffffffffffffffffff1614611456576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161144d906131ac565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036114c5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114bc9061323e565b60405180910390fd5b6114d08383836119ba565b6114db6000826111be565b6001600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461152b9190612943565b925050819055506001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611582919061287d565b92505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a46116418383836119bf565b505050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036116b4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016116ab906132aa565b60405180910390fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516117a59190612019565b60405180910390a3505050565b6117bd8484846113e0565b6117c9848484846119c4565b611808576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117ff9061333c565b60405180910390fd5b50505050565b60606118198261114a565b611858576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184f906133ce565b60405180910390fd5b6000600660008481526020019081526020016000208054611878906125fb565b80601f01602080910402602001604051908101604052809291908181526020018280546118a4906125fb565b80156118f15780601f106118c6576101008083540402835291602001916118f1565b820191906000526020600020905b8154815290600101906020018083116118d457829003601f168201915b505050505090506000611902611b4b565b9050600081510361191757819250505061195a565b60008251111561194c57808260405160200161193492919061342a565b6040516020818303038152906040529250505061195a565b61195584611b62565b925050505b919050565b6119698383611c09565b61197660008484846119c4565b6119b5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016119ac9061333c565b60405180910390fd5b505050565b505050565b505050565b60006119e58473ffffffffffffffffffffffffffffffffffffffff16611de2565b15611b3e578373ffffffffffffffffffffffffffffffffffffffff1663150b7a02611a0e6111b6565b8786866040518563ffffffff1660e01b8152600401611a3094939291906134a3565b6020604051808303816000875af1925050508015611a6c57506040513d601f19601f82011682018060405250810190611a699190613504565b60015b611aee573d8060008114611a9c576040519150601f19603f3d011682016040523d82523d6000602084013e611aa1565b606091505b506000815103611ae6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611add9061333c565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614915050611b43565b600190505b949350505050565b606060405180602001604052806000815250905090565b6060611b6d8261114a565b611bac576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611ba3906135a3565b60405180910390fd5b6000611bb6611b4b565b90506000815111611bd65760405180602001604052806000815250611c01565b80611be084611e05565b604051602001611bf192919061342a565b6040516020818303038152906040525b915050919050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603611c78576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611c6f9061360f565b60405180910390fd5b611c818161114a565b15611cc1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611cb89061367b565b60405180910390fd5b611ccd600083836119ba565b6001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611d1d919061287d565b92505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4611dde600083836119bf565b5050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b606060008203611e4c576040518060400160405280600181526020017f30000000000000000000000000000000000000000000000000000000000000008152509050611f60565b600082905060005b60008214611e7e578080611e679061369b565b915050600a82611e779190613712565b9150611e54565b60008167ffffffffffffffff811115611e9a57611e99612331565b5b6040519080825280601f01601f191660200182016040528015611ecc5781602001600182028036833780820191505090505b5090505b60008514611f5957600182611ee59190612943565b9150600a85611ef49190613743565b6030611f00919061287d565b60f81b818381518110611f1657611f15613774565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600a85611f529190613712565b9450611ed0565b8093505050505b919050565b6000604051905090565b600080fd5b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b611fae81611f79565b8114611fb957600080fd5b50565b600081359050611fcb81611fa5565b92915050565b600060208284031215611fe757611fe6611f6f565b5b6000611ff584828501611fbc565b91505092915050565b60008115159050919050565b61201381611ffe565b82525050565b600060208201905061202e600083018461200a565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b8381101561206e578082015181840152602081019050612053565b60008484015250505050565b6000601f19601f8301169050919050565b600061209682612034565b6120a0818561203f565b93506120b0818560208601612050565b6120b98161207a565b840191505092915050565b600060208201905081810360008301526120de818461208b565b905092915050565b6000819050919050565b6120f9816120e6565b811461210457600080fd5b50565b600081359050612116816120f0565b92915050565b60006020828403121561213257612131611f6f565b5b600061214084828501612107565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061217482612149565b9050919050565b61218481612169565b82525050565b600060208201905061219f600083018461217b565b92915050565b6121ae81612169565b81146121b957600080fd5b50565b6000813590506121cb816121a5565b92915050565b600080604083850312156121e8576121e7611f6f565b5b60006121f6858286016121bc565b925050602061220785828601612107565b9150509250929050565b60006020828403121561222757612226611f6f565b5b6000612235848285016121bc565b91505092915050565b60008060006060848603121561225757612256611f6f565b5b6000612265868287016121bc565b9350506020612276868287016121bc565b925050604061228786828701612107565b9150509250925092565b61229a816120e6565b82525050565b60006020820190506122b56000830184612291565b92915050565b6122c481611ffe565b81146122cf57600080fd5b50565b6000813590506122e1816122bb565b92915050565b600080604083850312156122fe576122fd611f6f565b5b600061230c858286016121bc565b925050602061231d858286016122d2565b9150509250929050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6123698261207a565b810181811067ffffffffffffffff8211171561238857612387612331565b5b80604052505050565b600061239b611f65565b90506123a78282612360565b919050565b600067ffffffffffffffff8211156123c7576123c6612331565b5b6123d08261207a565b9050602081019050919050565b82818337600083830152505050565b60006123ff6123fa846123ac565b612391565b90508281526020810184848401111561241b5761241a61232c565b5b6124268482856123dd565b509392505050565b600082601f83011261244357612442612327565b5b81356124538482602086016123ec565b91505092915050565b6000806000806080858703121561247657612475611f6f565b5b6000612484878288016121bc565b9450506020612495878288016121bc565b93505060406124a687828801612107565b925050606085013567ffffffffffffffff8111156124c7576124c6611f74565b5b6124d38782880161242e565b91505092959194509250565b600080fd5b600080fd5b60008083601f8401126124ff576124fe612327565b5b8235905067ffffffffffffffff81111561251c5761251b6124df565b5b602083019150836001820283011115612538576125376124e4565b5b9250929050565b6000806020838503121561255657612555611f6f565b5b600083013567ffffffffffffffff81111561257457612573611f74565b5b612580858286016124e9565b92509250509250929050565b600080604083850312156125a3576125a2611f6f565b5b60006125b1858286016121bc565b92505060206125c2858286016121bc565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061261357607f821691505b602082108103612626576126256125cc565b5b50919050565b7f4552433732313a20617070726f76656420717565727920666f72206e6f6e657860008201527f697374656e7420746f6b656e0000000000000000000000000000000000000000602082015250565b6000612688602c8361203f565b91506126938261262c565b604082019050919050565b600060208201905081810360008301526126b78161267b565b9050919050565b7f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560008201527f7200000000000000000000000000000000000000000000000000000000000000602082015250565b600061271a60218361203f565b9150612725826126be565b604082019050919050565b600060208201905081810360008301526127498161270d565b9050919050565b7f4552433732313a20617070726f76652063616c6c6572206973206e6f74206f7760008201527f6e6572206e6f7220617070726f76656420666f7220616c6c0000000000000000602082015250565b60006127ac60388361203f565b91506127b782612750565b604082019050919050565b600060208201905081810360008301526127db8161279f565b9050919050565b7f536f727279205469636b65747320736f6c64206f757400000000000000000000600082015250565b600061281860168361203f565b9150612823826127e2565b602082019050919050565b600060208201905081810360008301526128478161280b565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000612888826120e6565b9150612893836120e6565b92508282019050808211156128ab576128aa61284e565b5b92915050565b7f4552433732313a207472616e736665722063616c6c6572206973206e6f74206f60008201527f776e6572206e6f7220617070726f766564000000000000000000000000000000602082015250565b600061290d60318361203f565b9150612918826128b1565b604082019050919050565b6000602082019050818103600083015261293c81612900565b9050919050565b600061294e826120e6565b9150612959836120e6565b92508282039050818111156129715761297061284e565b5b92915050565b7f536f727279206f6e6c7920746865204f7267616e697a65722063616e2073657460008201527f2052617465000000000000000000000000000000000000000000000000000000602082015250565b60006129d360258361203f565b91506129de82612977565b604082019050919050565b60006020820190508181036000830152612a02816129c6565b9050919050565b7f4552433732313a206f776e657220717565727920666f72206e6f6e657869737460008201527f656e7420746f6b656e0000000000000000000000000000000000000000000000602082015250565b6000612a6560298361203f565b9150612a7082612a09565b604082019050919050565b60006020820190508181036000830152612a9481612a58565b9050919050565b7f536f727279206f6e6c7920746865204f7267616e697a65722063616e2073657460008201527f204d617820737570706c79000000000000000000000000000000000000000000602082015250565b6000612af7602b8361203f565b9150612b0282612a9b565b604082019050919050565b60006020820190508181036000830152612b2681612aea565b9050919050565b7f4552433732313a2062616c616e636520717565727920666f7220746865207a6560008201527f726f206164647265737300000000000000000000000000000000000000000000602082015250565b6000612b89602a8361203f565b9150612b9482612b2d565b604082019050919050565b60006020820190508181036000830152612bb881612b7c565b9050919050565b7f536f727279206f6e6c7920746865204f7267616e697a65722063616e2073657460008201527f2055524900000000000000000000000000000000000000000000000000000000602082015250565b6000612c1b60248361203f565b9150612c2682612bbf565b604082019050919050565b60006020820190508181036000830152612c4a81612c0e565b9050919050565b600082905092915050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302612cbe7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82612c81565b612cc88683612c81565b95508019841693508086168417925050509392505050565b6000819050919050565b6000612d05612d00612cfb846120e6565b612ce0565b6120e6565b9050919050565b6000819050919050565b612d1f83612cea565b612d33612d2b82612d0c565b848454612c8e565b825550505050565b600090565b612d48612d3b565b612d53818484612d16565b505050565b5b81811015612d7757612d6c600082612d40565b600181019050612d59565b5050565b601f821115612dbc57612d8d81612c5c565b612d9684612c71565b81016020851015612da5578190505b612db9612db185612c71565b830182612d58565b50505b505050565b600082821c905092915050565b6000612ddf60001984600802612dc1565b1980831691505092915050565b6000612df88383612dce565b9150826002028217905092915050565b612e128383612c51565b67ffffffffffffffff811115612e2b57612e2a612331565b5b612e3582546125fb565b612e40828285612d7b565b6000601f831160018114612e6f5760008415612e5d578287013590505b612e678582612dec565b865550612ecf565b601f198416612e7d86612c5c565b60005b82811015612ea557848901358255600182019150602085019450602081019050612e80565b86831015612ec25784890135612ebe601f891682612dce565b8355505b6001600288020188555050505b50505050505050565b7f536f727279204e6f7420656e6f756768206d6f6e657900000000000000000000600082015250565b6000612f0e60168361203f565b9150612f1982612ed8565b602082019050919050565b60006020820190508181036000830152612f3d81612f01565b9050919050565b7f45524337323155524953746f726167653a2055524920736574206f66206e6f6e60008201527f6578697374656e7420746f6b656e000000000000000000000000000000000000602082015250565b6000612fa0602e8361203f565b9150612fab82612f44565b604082019050919050565b60006020820190508181036000830152612fcf81612f93565b9050919050565b612fdf82612034565b67ffffffffffffffff811115612ff857612ff7612331565b5b61300282546125fb565b61300d828285612d7b565b600060209050601f831160018114613040576000841561302e578287015190505b6130388582612dec565b8655506130a0565b601f19841661304e86612c5c565b60005b8281101561307657848901518255600182019150602085019450602081019050613051565b86831015613093578489015161308f601f891682612dce565b8355505b6001600288020188555050505b505050505050565b7f4552433732313a206f70657261746f7220717565727920666f72206e6f6e657860008201527f697374656e7420746f6b656e0000000000000000000000000000000000000000602082015250565b6000613104602c8361203f565b915061310f826130a8565b604082019050919050565b60006020820190508181036000830152613133816130f7565b9050919050565b7f4552433732313a207472616e736665722066726f6d20696e636f72726563742060008201527f6f776e6572000000000000000000000000000000000000000000000000000000602082015250565b600061319660258361203f565b91506131a18261313a565b604082019050919050565b600060208201905081810360008301526131c581613189565b9050919050565b7f4552433732313a207472616e7366657220746f20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b600061322860248361203f565b9150613233826131cc565b604082019050919050565b600060208201905081810360008301526132578161321b565b9050919050565b7f4552433732313a20617070726f766520746f2063616c6c657200000000000000600082015250565b600061329460198361203f565b915061329f8261325e565b602082019050919050565b600060208201905081810360008301526132c381613287565b9050919050565b7f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560008201527f63656976657220696d706c656d656e7465720000000000000000000000000000602082015250565b600061332660328361203f565b9150613331826132ca565b604082019050919050565b6000602082019050818103600083015261335581613319565b9050919050565b7f45524337323155524953746f726167653a2055524920717565727920666f722060008201527f6e6f6e6578697374656e7420746f6b656e000000000000000000000000000000602082015250565b60006133b860318361203f565b91506133c38261335c565b604082019050919050565b600060208201905081810360008301526133e7816133ab565b9050919050565b600081905092915050565b600061340482612034565b61340e81856133ee565b935061341e818560208601612050565b80840191505092915050565b600061343682856133f9565b915061344282846133f9565b91508190509392505050565b600081519050919050565b600082825260208201905092915050565b60006134758261344e565b61347f8185613459565b935061348f818560208601612050565b6134988161207a565b840191505092915050565b60006080820190506134b8600083018761217b565b6134c5602083018661217b565b6134d26040830185612291565b81810360608301526134e4818461346a565b905095945050505050565b6000815190506134fe81611fa5565b92915050565b60006020828403121561351a57613519611f6f565b5b6000613528848285016134ef565b91505092915050565b7f4552433732314d657461646174613a2055524920717565727920666f72206e6f60008201527f6e6578697374656e7420746f6b656e0000000000000000000000000000000000602082015250565b600061358d602f8361203f565b915061359882613531565b604082019050919050565b600060208201905081810360008301526135bc81613580565b9050919050565b7f4552433732313a206d696e7420746f20746865207a65726f2061646472657373600082015250565b60006135f960208361203f565b9150613604826135c3565b602082019050919050565b60006020820190508181036000830152613628816135ec565b9050919050565b7f4552433732313a20746f6b656e20616c7265616479206d696e74656400000000600082015250565b6000613665601c8361203f565b91506136708261362f565b602082019050919050565b6000602082019050818103600083015261369481613658565b9050919050565b60006136a6826120e6565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036136d8576136d761284e565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b600061371d826120e6565b9150613728836120e6565b925082613738576137376136e3565b5b828204905092915050565b600061374e826120e6565b9150613759836120e6565b925082613769576137686136e3565b5b828206905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fdfea264697066735822122087d552623ae12f04459089b138dc96c77fb6ab1efdc432acde3144d16fd8e25c64736f6c63430008110033",
  },
  abi: [
    {
      inputs: [],
      stateMutability: "nonpayable",
      type: "constructor",
    },
    {
      anonymous: false,
      inputs: [
        {
          indexed: true,
          internalType: "address",
          name: "owner",
          type: "address",
        },
        {
          indexed: true,
          internalType: "address",
          name: "approved",
          type: "address",
        },
        {
          indexed: true,
          internalType: "uint256",
          name: "tokenId",
          type: "uint256",
        },
      ],
      name: "Approval",
      type: "event",
    },
    {
      anonymous: false,
      inputs: [
        {
          indexed: true,
          internalType: "address",
          name: "owner",
          type: "address",
        },
        {
          indexed: true,
          internalType: "address",
          name: "operator",
          type: "address",
        },
        {
          indexed: false,
          internalType: "bool",
          name: "approved",
          type: "bool",
        },
      ],
      name: "ApprovalForAll",
      type: "event",
    },
    {
      anonymous: false,
      inputs: [
        {
          indexed: true,
          internalType: "address",
          name: "from",
          type: "address",
        },
        {
          indexed: true,
          internalType: "address",
          name: "to",
          type: "address",
        },
        {
          indexed: true,
          internalType: "uint256",
          name: "tokenId",
          type: "uint256",
        },
      ],
      name: "Transfer",
      type: "event",
    },
    {
      inputs: [
        {
          internalType: "address",
          name: "to",
          type: "address",
        },
        {
          internalType: "uint256",
          name: "tokenId",
          type: "uint256",
        },
      ],
      name: "approve",
      outputs: [],
      stateMutability: "nonpayable",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "address",
          name: "owner",
          type: "address",
        },
      ],
      name: "balanceOf",
      outputs: [
        {
          internalType: "uint256",
          name: "",
          type: "uint256",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "uint256",
          name: "tokenId",
          type: "uint256",
        },
      ],
      name: "getApproved",
      outputs: [
        {
          internalType: "address",
          name: "",
          type: "address",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [],
      name: "getMaxSupply",
      outputs: [
        {
          internalType: "uint256",
          name: "",
          type: "uint256",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "address",
          name: "to",
          type: "address",
        },
      ],
      name: "getPass",
      outputs: [],
      stateMutability: "payable",
      type: "function",
    },
    {
      inputs: [],
      name: "getPassIssued",
      outputs: [
        {
          internalType: "uint256",
          name: "",
          type: "uint256",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [],
      name: "getPassLeft",
      outputs: [
        {
          internalType: "uint256",
          name: "",
          type: "uint256",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [],
      name: "getRateOfPass",
      outputs: [
        {
          internalType: "uint256",
          name: "",
          type: "uint256",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "address",
          name: "to",
          type: "address",
        },
      ],
      name: "getSpecialPass",
      outputs: [],
      stateMutability: "nonpayable",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "address",
          name: "owner",
          type: "address",
        },
        {
          internalType: "address",
          name: "operator",
          type: "address",
        },
      ],
      name: "isApprovedForAll",
      outputs: [
        {
          internalType: "bool",
          name: "",
          type: "bool",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [],
      name: "name",
      outputs: [
        {
          internalType: "string",
          name: "",
          type: "string",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "uint256",
          name: "tokenId",
          type: "uint256",
        },
      ],
      name: "ownerOf",
      outputs: [
        {
          internalType: "address",
          name: "",
          type: "address",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "address",
          name: "from",
          type: "address",
        },
        {
          internalType: "address",
          name: "to",
          type: "address",
        },
        {
          internalType: "uint256",
          name: "tokenId",
          type: "uint256",
        },
      ],
      name: "safeTransferFrom",
      outputs: [],
      stateMutability: "nonpayable",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "address",
          name: "from",
          type: "address",
        },
        {
          internalType: "address",
          name: "to",
          type: "address",
        },
        {
          internalType: "uint256",
          name: "tokenId",
          type: "uint256",
        },
        {
          internalType: "bytes",
          name: "_data",
          type: "bytes",
        },
      ],
      name: "safeTransferFrom",
      outputs: [],
      stateMutability: "nonpayable",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "address",
          name: "operator",
          type: "address",
        },
        {
          internalType: "bool",
          name: "approved",
          type: "bool",
        },
      ],
      name: "setApprovalForAll",
      outputs: [],
      stateMutability: "nonpayable",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "uint256",
          name: "limit",
          type: "uint256",
        },
      ],
      name: "setMaxSupply",
      outputs: [],
      stateMutability: "nonpayable",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "uint256",
          name: "rate",
          type: "uint256",
        },
      ],
      name: "setRateOfPass",
      outputs: [],
      stateMutability: "nonpayable",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "string",
          name: "tok_uri",
          type: "string",
        },
      ],
      name: "setTokenURI",
      outputs: [],
      stateMutability: "nonpayable",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "bytes4",
          name: "interfaceId",
          type: "bytes4",
        },
      ],
      name: "supportsInterface",
      outputs: [
        {
          internalType: "bool",
          name: "",
          type: "bool",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [],
      name: "symbol",
      outputs: [
        {
          internalType: "string",
          name: "",
          type: "string",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "uint256",
          name: "tokenId",
          type: "uint256",
        },
      ],
      name: "tokenURI",
      outputs: [
        {
          internalType: "string",
          name: "",
          type: "string",
        },
      ],
      stateMutability: "view",
      type: "function",
    },
    {
      inputs: [
        {
          internalType: "address",
          name: "from",
          type: "address",
        },
        {
          internalType: "address",
          name: "to",
          type: "address",
        },
        {
          internalType: "uint256",
          name: "tokenId",
          type: "uint256",
        },
      ],
      name: "transferFrom",
      outputs: [],
      stateMutability: "nonpayable",
      type: "function",
    },
  ],
};
export default {
  data() {
    return {
      contracts: [],
      displayAddEvent: false,
      metamask: false,
      address: "",
    };
  },
  mounted: async function () {
    setTimeout(async () => {
      //get contract transactions
      let txs = await axios.post(
        "https://VashistHackathon.mufazil.repl.co/getContract",
        { id: 2 }
      );
      txs = txs.data.contractTxn;
      const contractABI = smart_contract.abi;

      if (ethereum.selectedAddress != null) {
        this.metamask = true;
        window.web3 = new Web3(web3.currentProvider);
        for (const tx of txs) {
          const txReceipt = await window.web3.eth.getTransactionReceipt(tx);
          const contract = new web3.eth.Contract(
            contractABI,
            txReceipt.contractAddress
          );
          let result = await contract.methods.name().call();
          let passLeft = await contract.methods.getPassLeft().call();
          let supply = await contract.methods.getMaxSupply().call();
          let passamt = await contract.methods.getRateOfPass().call();
          let issued = await contract.methods.getPassIssued().call();
          this.contracts.push({
            addr: txReceipt.contractAddress,
            passLeft: passLeft,
            supply: supply,
            passamt: passamt,
            issued: issued,
          });
        }
      }
    }, 1000);
  },
  methods: {
    async getSpecialPass(contractAddress) {
      const address = this.address;
      const contractABI = smart_contract.abi;
      console.log(contractAddress);
      const contract = new web3.eth.Contract(contractABI);
      contract.options.address = contractAddress;
      const tx = contract.methods.getSpecialPass(address);
      const receipt = await tx
        .send({
          // used first account from your wallet.
          from: (await web3.eth.getAccounts())[0],
          gas: await tx.estimateGas(),
        })
        .on("transactionHash", (txhash) => {
          console.log(`Mining transaction tx: ${txhash}`);
        })
        .on("error", function (error) {
          console.error(`An error happened: ${error}`);
        })
        .then(function (receipt) {
          // Success, you've minted the NFT. The transaction is now on chain!
          console.log(
            `Success: The NFT has been minted and mined in block ${receipt.blockNumber}`
          );
        });
    },
    async connect_metamask() {
      await ethereum.enable();
      window.location.reload();
    },
    getAddress() {
      if (ethereum.isConnected() === true) return ethereum.selectedAddress;
      else return "Not connected";
    },
    getNetwork() {
      if (ethereum.isConnected() === true) return ethereum.networkVersion;
      else return "Not connected";
    },
    deployContract() {
      window.web3 = new Web3(web3.currentProvider);
      const contractABI = smart_contract.abi;
      const bytecode = smart_contract.bytecode;
      const contract = new web3.eth.Contract(contractABI);
      contract
        .deploy({
          data: bytecode.object,
        })
        .send({
          from: ethereum.selectedAddress,
          gas: 8095200,
        })
        .on("transactionHash", function (transactionHash) {
          console.log("Transaction Hash:", transactionHash);
          axios.post("https://VashistHackathon.mufazil.repl.co/addContract", {
            id: 2,
            transaction: transactionHash,
          });
          alert("Please wait a while.");
        })
        .on("receipt", function (receipt) {
          console.log("Contract Address:", receipt.contractAddress);
          //Send to Backend
          //0x7b44C7edbeEEDe63Edd606D8E974fC042388A4de
          alert("Success! Refresh this page");
        })
        .on("error", function (error) {
          console.error(error);
          alert("Unsuccessful! :(");
        });
    },
  },
};
</script>
<template>
  <div class="bg"></div>
  <div class="content">
    <div class="sidebar">
      <div class="title">Dashboard</div>
      <div class="item">Events</div>
    </div>
    <div class="main">
      <button v-if="!metamask" @click="connect_metamask" class="primary-btn">
        CONNECT METAMASK
      </button>

      <button
        v-if="metamask"
        @click="displayAddEvent = true"
        style="
          background-color: brown;
          border: none;
          border-radius: 5px;
          color: white;
          margin: 20px;
        "
      >
        Add Event
      </button>
      <div v-if="displayAddEvent" class="form">
        <h2>Add Event</h2>

        <div class="flex column">
          <label for="name">Event Name</label>
          <input type="text" name="name" placeholder="Event Name" />
          <label for="amt">Pass Amount</label>
          <input type="number" name="amt" placeholder="Pass Amount" />
          <label for="supply">Total Supply of Passes</label>
          <input
            type="number"
            name="supply"
            placeholder="Total Supply of Passes"
          />
          <button @click="deployContract" class="add-btn">Add Event</button>
        </div>
      </div>

      <div class="contracts">
        <div class="contract" v-for="contract in contracts">
          <p>Max Pass Supply :{{ contract.supply }}</p>
          <p>Pass Amount: {{ contract.passamt }}</p>
          <p>Total Passes issued: {{ contract.issued }}</p>
          <p>Passes Left: {{ contract.passLeft }}</p>
          <p>
            Get Special Passes :
            <input type="text" v-model="address" placeholder="Address" /><button
              @click="() => getSpecialPass(contract.addr)"
            >
              Request
            </button>
          </p>
          <p>
            Share this link to everyone to buy the pass:
            <RouterLink :to="`/getPass/${contract.addr}`">{{
              `/getPass/${contract.addr}`
            }}</RouterLink>
          </p>
        </div>
      </div>
    </div>
  </div>
</template>
<style scoped>
button {
  height: 40px;
  width: 100px;
}
.contract {
  background-color: beige;
  width: 500px;
  border-radius: 5px;
  margin: 20px;
  padding: 10px;
}
.contract > p {
  margin-top: 10px;
  font-size: 20px;
  margin-bottom: 10px;
}
.stats {
  margin: 10px;
  background: #111;
  color: #aaa;
  border-radius: 5px;
  height: 100px;
  padding: 10px;
}
.bold {
  color: white;
  font-weight: bold;
}
.add-btn {
  height: 40px;
  border: none;
  border-radius: 7px;
  margin: 10px;
  background-color: rgba(255, 19, 58, 0.829);
  font-size: 18px;
  color: white;
}
label {
  margin-left: 10px;
  margin-top: 10px;
  margin-bottom: 5px;
  color: #888;
}
input {
  height: 40px;
  border-radius: 7px;
  border: none;
  background-color: #aaa;
  margin-bottom: 10px;
  margin-left: 10px;
  margin-right: 10px;
  padding-left: 10px;
}
.flex {
  display: flex;
}
.column {
  flex-direction: column;
}
.form {
  margin: 20px;
  background: white;
  border-radius: 10px;
  padding: 20px;
  color: #222;
  width: 400px;
}
.primary-btn {
  border: none;
  height: 50px;
  border-radius: 5px;
  width: 280px;
  padding-left: 50px;
  color: #111;
  font-weight: 400;
  font-size: 18px;
  margin: 10px;
  font-weight: 600;
  background-image: url("/metamask.png");
  background-size: contain;
  background-repeat: no-repeat;
}
.title {
  color: white;
  font-size: 30px;
  text-align: center;
  margin: 10px;
}
.item {
  background-color: rgba(87, 27, 27, 0.76);
  height: 40px;
  border-radius: 5px;
  color: white;
  text-align: center;
  line-height: 40px;
  /* From https://css.glass */
  background: rgba(255, 116, 39, 0.21);
  /* border-radius: 16px; */
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  border: 1px solid rgba(255, 116, 39, 0.3);
}
.content {
  position: absolute;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
}
.sidebar {
  width: 300px;
  height: 100%;
  display: flex;
  flex-direction: column;
}
.main {
  height: 100%;
  width: 100%;
  /* From https://css.glass */
  background: rgba(255, 255, 255, 0.6);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}
</style>
